<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Experiment 1 - TCIN</title>

  <link rel="stylesheet" href="https://js.arcgis.com/4.28/esri/themes/light/main.css" />
  <script src="https://js.arcgis.com/4.28/"></script>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>

  <style>
    html,
    body,
    #viewDiv {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
    }
    #logoDiv {
      padding: 12px;
      background-color: black;
      color: pink;
      text-align: center;
      width: 100px;
    }
    #droneControl {
      /* position: absolute; */
      top: 0;
      right: 0;
      height: 100%;
      background: rgba(255,255,255, 0.9);
      width: 320px;
    }
    #droneRatings {
    /* position: absolute; */
    bottom: 0;
    width: 100%;
    background: rgba(255,255,255, 0.9);
    }
    #droneSelectionForm {
      top: 0;
      width: 100%;
      background: rgba(255,255,255, 0.9);
      display: flex;
      flex-direction: column; /* This will stack the fields vertically */
    }
    #droneSelectionForm > div {
      margin-bottom: 10px; /* Adds space between the form elements */
    }
    #submitBtn {
      width: 40%; /* Smaller width */
      margin: 0 auto; /* Center the button */
    }
    hr {
      border: 0;
      height: 1px;
      background: #ccc; /* Light grey line */
      margin: 10px 0; /* Spacing above and below the line */
    }
  </style>

  <script>
    require([
      "esri/Map",
      "esri/views/MapView",
      "esri/Graphic",
      "esri/geometry/Point",
      "esri/geometry/Polyline",
      "esri/widgets/Expand",
      "esri/widgets/Search",
      "esri/geometry/Polygon"
    ], (Map, MapView, Graphic, Point, Polyline, Expand, Search, Polygon) => {
      const map = new Map({
        basemap: "hybrid"
      });

      const view = new MapView({
        center: [-85, 35],
        container: "viewDiv",
        map: map,
        zoom: 7
      });

      // Assuming gridSize is the size of your grid cells
      const gridSize = 0.5; // Size of each grid cell in some unit

      // Dynamic size of drones based on gridSize
      const droneSymbolSize = `${gridSize * 100}px`; // Convert gridSize to pixels if necessary

     // Define the symbol for drawing the points
      const markerSymbol1 = {
        type: "picture-marker",
        url: "{% static 'img/thermal-drone.png' %}",
        width: droneSymbolSize,
        height: droneSymbolSize
        // width: "30px",
        // height: "30px"
      };

      const markerSymbol2 = {
        type: "picture-marker",
        url: "{% static 'img/sniffer-drone.png' %}",
        width: droneSymbolSize,
        height: droneSymbolSize
        // width: "30px",
        // height: "30px"
      };

      // Create multiple point graphics - Drones
      const pointGraphics = [
        new Graphic({
          geometry: new Point({ longitude: -84.75, latitude: 35.25 }), // Quadrant 1
          symbol: markerSymbol1,
          attributes: { id: "drone1"}
        }),
        new Graphic({
          geometry: new Point({ longitude: -85.25, latitude: 35.25 }), // Quadrant 2
          symbol: markerSymbol1,
          attributes: { id: "drone2"}
        }),
        new Graphic({
          geometry: new Point({ longitude: -85.25, latitude: 34.75 }), // Quadrant 3
          symbol: markerSymbol2,
          attributes: { id: "drone3"}
        }),
        new Graphic({
          geometry: new Point({ longitude: -84.75, latitude: 34.75 }), // Quadrant 4
          symbol: markerSymbol2,
          attributes: { id: "drone4"}
        })
      ];

      //Line 1 - Xaxis
      const Xaxis = {
           type: "polyline", // autocasts as new Polyline()
           paths: [[-95, 35], [-75, 35]]
         };

      // Line 2 - Yaxis
      const Yaxis = {
           type: "polyline", // autocasts as new Polyline()
           paths: [[-85, 30], [-85, 40]]
         };

      // Symbol for drawing the lines
      const lineSymbol = {
           type: "simple-line", // autocasts as SimpleLineSymbol()
           color: [226, 119, 40],
           width: 4
         };

      // Symbol for grid lines
      const gridLineSymbol = {
             type: "simple-line",
             color: [0, 0, 0, 0.3], // Semi-transparent black
             width: "1px"
           };

      const XaxisGraphic = new Graphic({
           geometry: Xaxis,
           symbol: lineSymbol
         });

      const YaxisGraphic = new Graphic({
           geometry: Yaxis,
           symbol: lineSymbol
         });

      // Function to create a grid in a quadrant
      function createGrid(xStart, yStart, xEnd, yEnd, cellSize) {
           const gridGraphics = [];
           for (let x = xStart; x < xEnd; x += cellSize) {
             for (let y = yStart; y < yEnd; y += cellSize) {
               const cell = new Polygon({
                 rings: [
                   [
                     [x, y],
                     [x + cellSize, y],
                     [x + cellSize, y + cellSize],
                     [x, y + cellSize],
                     [x, y] // Close the polygon
                   ]
                 ]
               });

               const cellGraphic = new Graphic({
                 geometry: cell,
                 symbol: {
                   type: "simple-fill",
                   color: [0, 0, 0, 0], // Transparent fill
                   outline: gridLineSymbol
                 }
               });

               gridGraphics.push(cellGraphic);
             }
           }
           return gridGraphics;
         }

      // Create grids for each quadrant
      // const gridSize = 0.5; // Size of each grid cell
      const quadrant1 = createGrid(-85, 35, -75, 40, gridSize);
      const quadrant2 = createGrid(-95, 35, -85, 40, gridSize);
      const quadrant3 = createGrid(-95, 30, -85, 35, gridSize);
      const quadrant4 = createGrid(-85, 30, -75, 35, gridSize);

      // Add the point graphics to the view's graphics layer
         view.graphics.addMany([...quadrant1, ...quadrant2, ...quadrant3, ...quadrant4, ...pointGraphics, XaxisGraphic, YaxisGraphic]);

      // //Create detection points for drones
      // const objectDetectionPoints = {
      //   drone1: [
      //     { longitude: -84.5, latitude: 35.5 },
      //     { longitude: -84.25, latitude: 39.5 }
      //   ],
      //   drone2: [
      //     { longitude: -85.5, latitude: 35.5 },
      //     { longitude: -85.75, latitude: 39.5 }
      //   ],
      //   drone3: [
      //     { longitude: -85.5, latitude: 34.5 },
      //     { longitude: -85.75, latitude: 30.5 }
      //   ],
      //   drone4: [
      //     { longitude: -84.5, latitude: 34.5 },
      //     { longitude: -84.25, latitude: 30.5 }
      //   ]
      // };

      function assignDronesToQuadrants() {
        const quadrant1Drone = document.getElementById('quadrant1').value;
        const quadrant2Drone = document.getElementById('quadrant2').value;
        const quadrant3Drone = document.getElementById('quadrant3').value;
        const quadrant4Drone = document.getElementById('quadrant4').value;

        // Update the drone paths based on the selected quadrants
        dronePaths[quadrant1Drone].path = generateLawnmowerPatternQuadrant1(-84.75, 35.25);
        dronePaths[quadrant2Drone].path = generateLawnmowerPatternQuadrant2(-85.25, 35.25);
        dronePaths[quadrant3Drone].path = generateLawnmowerPatternQuadrant3(-85.25, 34.75);
        dronePaths[quadrant4Drone].path = generateLawnmowerPatternQuadrant4(-84.75, 34.75);
      }

      // Function to assign drones to quadrants based on user input and update their positions immediately
      function assignDronesToQuadrantsAndUpdatePositions() {
        assignDronesToQuadrants();

        // Immediately update drones' positions to the start of their paths before animation starts
        pointGraphics.forEach(graphic => {
          const droneId = graphic.attributes.id;
          const dronePath = dronePaths[droneId];
          if (dronePath && dronePath.path.length > 0) {
            const startPoint = dronePath.path[0]; // Assuming the path is an array of [longitude, latitude]
            graphic.geometry = new Point({
              longitude: startPoint[0], // Use the first element of the startPoint array for longitude
              latitude: startPoint[1] // Use the second element of the startPoint array for latitude
            });
          }
        });

        // Update the map with the new positions
        updateMap();
      }

      // Function to update the map with the assigned drone positions
      function updateMap() {
          // Refresh the graphics on the view
          view.graphics.removeAll();
          view.graphics.addMany([...quadrant1, ...quadrant2, ...quadrant3, ...quadrant4, ...pointGraphics, XaxisGraphic, YaxisGraphic]);
      }

      document.getElementById('droneSelectionForm').addEventListener('submit', function(event) {
          event.preventDefault(); // Prevent the form from submitting normally
          assignDronesToQuadrantsAndUpdatePositions();
          // updateMap(); // Update the map after assigning drones to quadrants
      });

      // Function to generate random object detection points within a quadrant
      function generateRandomObjectDetectionPoints(startX, startY, endX, endY, count) {
          let points = [];
          for (let i = 0; i < count; i++) {
              // Generate random points and snap them to the nearest multiple of 0.25
              const x = Math.round((startX + (Math.random() * (endX - startX))) / 0.25) * 0.25;
              const y = Math.round((startY + (Math.random() * (endY - startY))) / 0.25) * 0.25;
              points.push([x, y]);
          }
          return points;
      }

      // Assign random object detection points to each drone
      const objectDetectionPoints = {
          drone1: generateRandomObjectDetectionPoints(-85, 35, -75, 40, 5), // Quadrant 1
          drone2: generateRandomObjectDetectionPoints(-95, 35, -85, 40, 5), // Quadrant 2
          drone3: generateRandomObjectDetectionPoints(-95, 30, -85, 35, 5), // Quadrant 3
          drone4: generateRandomObjectDetectionPoints(-85, 30, -75, 35, 5)  // Quadrant 4
      };

      // Define paths for each drone to follow
      const dronePaths = {
        drone1: {
          path: generateLawnmowerPatternQuadrant1(-84.75, 35.25),
          objectDetectionPoints: objectDetectionPoints.drone1
        },
        drone2: {
          path: generateLawnmowerPatternQuadrant2(-85.25, 35.25),
          objectDetectionPoints: objectDetectionPoints.drone2
        },
        drone3: {
          path: generateLawnmowerPatternQuadrant3(-85.25, 34.75),
          objectDetectionPoints: objectDetectionPoints.drone3
        },
        drone4: {
          path: generateLawnmowerPatternQuadrant4(-84.75, 34.75),
          objectDetectionPoints: objectDetectionPoints.drone4
        },
      };

      // Print the object detection points for each drone
      console.log("Q1 Object Detection Points:", objectDetectionPoints.drone1);
      console.log("Q2 Object Detection Points:", objectDetectionPoints.drone2);
      console.log("Q3 Object Detection Points:", objectDetectionPoints.drone3);
      console.log("Q4 Object Detection Points:", objectDetectionPoints.drone4);

      // Function to generate lawnmower pattern for quadrant 1
      function generateLawnmowerPatternQuadrant1(startX, startY) {
        let path = [];
        for (let y = startY; y <= 40; y += gridSize) {
          if ((y - startY) / gridSize % 2 === 0) { // even row
            for (let x = startX; x <= -75; x += gridSize) {
              path.push([x, y]);
            }
          } else { // odd row
            for (let x = -75; x >= startX; x -= gridSize) {
              path.push([x, y]);
            }
          }
        }
        console.log("Drone 1 Path:", path);
        return path;
      }

      // Function to generate lawnmower pattern for quadrant 2
      function generateLawnmowerPatternQuadrant2(startX, startY) {
        let path = [];
        for (let y = startY; y <= 40; y += gridSize) {
          if ((y - startY) / gridSize % 2 === 0) { // even row
            for (let x = startX; x >= -95; x -= gridSize) {
              path.push([x, y]);
            }
          } else { // odd row
            for (let x = -95; x <= startX; x += gridSize) {
              path.push([x, y]);
            }
          }
        }
        console.log("Drone 2 Path:", path);
        return path;
      }

      // Function to generate lawnmower pattern for quadrant 3
      function generateLawnmowerPatternQuadrant3(startX, startY) {
        let path = [];
        for (let y = startY; y >= 30; y -= gridSize) {
          if ((startY - y) / gridSize % 2 === 0) { // even row
            for (let x = startX; x >= -95; x -= gridSize) {
              path.push([x, y]);
            }
          } else { // odd row
            for (let x = -95; x <= startX; x += gridSize) {
              path.push([x, y]);
            }
          }
        }
        console.log("Drone 3 Path:", path);
        return path;
      }

      // Function to generate lawnmower pattern for quadrant 4
      function generateLawnmowerPatternQuadrant4(startX, startY) {
        let path = [];
        for (let y = startY; y >= 30; y -= gridSize) {
          if ((startY - y) / gridSize % 2 === 0) { // even row
            for (let x = startX; x <= -75; x += gridSize) {
              path.push([x, y]);
            }
          } else { // odd row
            for (let x = -75; x >= startX; x -= gridSize) {
              path.push([x, y]);
            }
          }
        }
        console.log("Drone 4 Path:", path);
        return path;
      }

      //Detected object
      // const clueImage = {
      //   type: "picture-marker",
      //   url: "{% static 'img/clue2.png' %}",
      //   width: "30px",
      //   height: "30px"
      // };

      // Object detection image and text // Text1: for obj type & Text2: for Foliage level
      var imagesAndTexts = [
        { url: "{% static 'img/opticonly_sample.png' %}", text1: "Obj type A - Optic sensor", text2: "Foliage level" },
        { url: "{% static 'img/thermal_sample.png' %}", text1: "Obj type B - Thermal image", text2: "Foliage level" },
        { url: "{% static 'img/tracer_sample.png' %}", text1: "Obj type B - Tracer image", text2: "Foliage level" },
        // ... add more images and texts as needed
      ];

      // var clueImageUrl = "{% static 'img/targetsampleH.png' %}";

      // Function to get a random image and text
      function getRandomImageAndText() {
        var randomIndex = Math.floor(Math.random() * imagesAndTexts.length);
        return imagesAndTexts[randomIndex];
      }

      // Function to move drones along their paths
      function moveDrone(drone, dronePath) {
        const currentLocationIndex = dronePath.path.findIndex(point =>
          Math.abs(point[0] - drone.geometry.longitude) < 0.00001 &&
          Math.abs(point[1] - drone.geometry.latitude) < 0.00001
        );
        const nextLocationIndex = (currentLocationIndex + 1) % dronePath.path.length;
        const nextPoint = dronePath.path[nextLocationIndex];

        if (nextPoint) {
          drone.geometry = new Point({
            longitude: nextPoint[0], // Use the first element of the nextPoint array for longitude
            latitude: nextPoint[1]  // Use the second element of the nextPoint array for latitude
          });
        } else {
          console.error("Next point is undefined. Check the path definition for drone:", drone.attributes.id);
        }

        const detected = dronePath.objectDetectionPoints.some(detectedPoint =>
          Math.abs(detectedPoint[0] - nextPoint[0]) < 0.00001 &&
          Math.abs(detectedPoint[1] - nextPoint[1]) < 0.00001
        );

        if (detected) {
          // If an object is detected, pause the drone movement
          isAnimating = false;

          // And display the pop-up with the image of the detected object
          showObjectDetectedPopup("Object detected at " + nextPoint.join(", "), drone.attributes.id);
        }
      }

      // Function to update the "drone control" UI
      function updateDroneControlUI(droneName, imageText1, imageText2) {
        // Select the paragraph elements for the "Current drone:", "Object detected:", and "Foliage density:"
        const currentDroneElement = document.querySelector('#current-drone');
        const objectDetectedElement = document.querySelector('#object-detected');
        const foliageDensityElement = document.querySelector('#foliage-density');

        // Update their text content with the name of the drone and the image texts
        currentDroneElement.textContent = `Current drone: ${droneName}`;
        objectDetectedElement.textContent = `Object detected: ${imageText1}`;
        foliageDensityElement.textContent = `Foliage density: ${imageText2}`;
      }

      //Function for pop-up of object detected
     function showObjectDetectedPopup(message, droneName) {
       var randomImageAndText = getRandomImageAndText();
       var imageUrl = randomImageAndText.url;
       var imageText1 = randomImageAndText.text1;
       var imageText2 = randomImageAndText.text2

       const popup = document.createElement("div");
       const image = document.createElement("img");
       image.src = imageUrl;
       image.alt = "Detected Object";
       image.style.width = "400px"; // Set the width of the image
       image.style.height = "400px"; // Set the height of the image
       image.style.display = "block"; // Display the image as a block element
       image.style.marginBottom = "10px"; // Margin below the image

       const textNode1 = document.createTextNode(message + " by " + droneName + imageText1); //Message appearing when object detected
       const textNode2 = document.createTextNode(imageText2);
       popup.appendChild(image); // Append the image to the popup
       popup.appendChild(textNode1); // Append the text message to the popup - from image text1
       popup.appendChild(document.createElement("br")); // Line break between texts
       popup.appendChild(textNode2); // Append the text message to the popup - from image text2

       popup.style.position = "absolute";
       popup.style.left = "50%";
       popup.style.top = "50%";
       popup.style.transform = "translate(-50%, -50%)";
       popup.style.backgroundColor = "white";
       popup.style.padding = "10px";
       popup.style.border = "1px solid black";
       popup.style.zIndex = "1000"; // Ensure the popup is above other elements

       document.body.appendChild(popup);

       // Automatically close the popup after 10 seconds
       setTimeout(() => {
         document.body.removeChild(popup);
       }, 10000);

       // Update the drone control UI with the name of the drone that detected the object
       updateDroneControlUI(droneName, imageText1, imageText2);
     }

      // //Start-stop search
      // const startButton = document.getElementById('startsearchbutton');
      // const stopButton = document.getElementById('stopsearchbutton');

         // Animation function to update point positions
      let animationFrameId;
      let isAnimating = false;

      function animate() {
        if (!isAnimating) {
          return;
        }

        pointGraphics.forEach(graphic => {
          const droneId = graphic.attributes.id;
          const dronePath = dronePaths[droneId];
          if (dronePath) {
            moveDrone(graphic, dronePath);
          } else {
            console.warn(`No path found for drone with id: ${droneId}`);
          }
        });

    // Refresh the graphics on the view
     view.graphics.removeAll();
     view.graphics.addMany([...quadrant1, ...quadrant2, ...quadrant3, ...quadrant4, ...pointGraphics, XaxisGraphic, YaxisGraphic]);

     // Request the next frame in the animation with a delay
     setTimeout(() => {
       animationFrameId = requestAnimationFrame(animate);
     }, 0.35 * 1000); // Delay in milliseconds (0.35 seconds per movement)
   }

         // // Start the animation
         // requestAnimationFrame(animate);

          //  // Stop the animation when the view is destroyed
          // view.on("destroy", () => {
          //    if (animationFrameId) {
          //      cancelAnimationFrame(animationFrameId);
          //    }
          //  });

      // Event listener for the Start Search button
      document.getElementById('startsearchbutton').addEventListener('click', function() {
        isAnimating = true;
        cancelAnimationFrame(animationFrameId);
        animate();
      });

      // Event listener for the Stop Search button
      document.getElementById('stopsearchbutton').addEventListener('click', function() {
        isAnimating = false;
      });

    //Search funtion
     const search = new Search({
             view: view
           });

     // Function to update the displayed value of the competence rating
     function updateCompetenceValue(value, droneNumber) {
      document.getElementById('competenceValue' + droneNumber).textContent = value;
    }

    // Function to update the displayed value of the trust rating
    function updateTrustValue(value, droneNumber) {
      document.getElementById('trustValue' + droneNumber).textContent = value;
    }

    // Event listener for the competence slider
    for (let i = 1; i <= 4; i++) {
      document.getElementById('competenceRange' + i).addEventListener('input', function() {
        updateCompetenceValue(this.value, i);
      });

      // Event listeners for the trust sliders
         document.getElementById('trustRange' + i).addEventListener('input', function() {
           updateTrustValue(this.value, i);
         });
       }

     //places the logo div in the bottom right corner of the view
     view.ui.add("logoDiv", "bottom-right");

     // places the search widget in the top right corner of the view
     view.ui.add(search, "top-right");

     // places the drone-assignment widget in the top right corner of the view
     view.ui.add("droneSelectionForm", "top-right");

     // places the drone-control widget in the top right corner of the view
     view.ui.add("droneControl", "top-right");

     // places the drone-ratings widget in the bottom of the view
     view.ui.add("droneRatings", "bottom-left");

         });

      // //storing drone competence and trust Ratings
      // let droneRatings = {
      //   drone1: {competence: 3, trust: 3},
      //   drone2: {competence: 3, trust: 3},
      //   drone3: {competence: 3, trust: 3},
      //   drone4: {competence: 3, trust: 3},
      // }
      //
      // //function to update drone droneRatings
      // function updateDroneRating(droneNumber, type, value){
      //   droneRatings[{droneNumber}][type] =
      // }
      //
      // //function to send ratings to the server
      //

  </script>

</head>

<body>
       <div id="viewDiv"></div>

       <div id="logoDiv" class="esri-widget">SCEL/VT</div>

       <form id="droneSelectionForm">
          <h2 class="main-heading">Initial Drone assignment</h2>
          <div>
         <label for="quadrant1">Quadrant 1:</label>
         <select id="quadrant1" name="quadrant1">
           <option value="drone1">Drone 1</option>
           <option value="drone2">Drone 2</option>
           <option value="drone3">Drone 3</option>
           <option value="drone4">Drone 4</option>
         </select>
       </div>
       <div>
         <label for="quadrant2">Quadrant 2:</label>
         <select id="quadrant2" name="quadrant2">
           <option value="drone1">Drone 1</option>
           <option value="drone2">Drone 2</option>
           <option value="drone3">Drone 3</option>
           <option value="drone4">Drone 4</option>
         </select>
       </div>
       <div>
         <label for="quadrant3">Quadrant 3:</label>
         <select id="quadrant3" name="quadrant3">
           <option value="drone1">Drone 1</option>
           <option value="drone2">Drone 2</option>
           <option value="drone3">Drone 3</option>
           <option value="drone4">Drone 4</option>
         </select>
       </div>
       <div>
         <label for="quadrant4">Quadrant 4:</label>
         <select id="quadrant4" name="quadrant4">
           <option value="drone1">Drone 1</option>
           <option value="drone2">Drone 2</option>
           <option value="drone3">Drone 3</option>
           <option value="drone4">Drone 4</option>
         </select>
       </div>
         <input id="submitBtn" type="submit" value="Submit">
       </form>

       <div id="droneControl" class="droneControl-container">
         <h2 class="main-heading">Drone control and Object detection</h2>
           <hr>

         <!-- <div>
           <h4 class="current-drone">Current drone: </h3>
           <h4 class="foliage-density">Foligage density: </h3>
             <hr> -->
           <h3 class="drone-motion">Drone Control Tools</h3>
           <!-- <div> -->
             <!-- <label >Load a scene: </label>
             <select id="sel_ic">
               <option value="0">Scene 1</option>
               <option value="1">Scene 2</option>
               <option value="2">Scene 3</option>
             </select>
             <input type="button" id="label_ic" value="Load" style="display:none"/>
           </div> -->

           <div>
             <label >Object Search: </label>
             <input type="button" class="start-button" value="Start Search" id="startsearchbutton">
             <input type="button" class="stop-button" value="Stop Search" id="stopsearchbutton">
           </div>
          <hr>

           <!--div><input type="checkbox" name="voronoi" class="check" value="random"> Random Voronoi</input></div-->
           <!--div><input type="checkbox" name="voronoi" class="check" value="triangle"> Triangle based on vertices</input></div-->
           <!--div><input type="checkbox" name="voronoi" class="check" value="clear"> Freehand Polygon</input></div-->


           <!-- <hr> -->
           <div>
           <h3 class="detection-info">Object detection</h3>
             <p id="current-drone">Current drone:</p>
             <p id="foliage-density">Foliage density:</p>
             <p id="object-detected">Object detected:</p>
           </div>
           <div>
             <label >Accept recommendation:</label>
             <input type="button" class="yes-button" value="Yes" id="accept-recommendation" />
             <input type="button" class="no-button" value="No" id="reject-recommendation" />
           </div>

           <!-- <div>
             <input type="text" class="bt_save_edit" id="tasknotes" value="Task_name"/>
             <input type="button" class="bt_save" value="Save Task" id="savetasks"/>
           </div> -->

           <div>
             <label >Re-categorize object: </label>
             <select id="sel_lpm">
               <option value="living target">Living target</option>
               <option value="non-living target">Non-living target</option>
               <option value="living distractor" selected>Living distractor</option>
               <option value="non-living distractor" selected>Non-living distractor</option>

             </select>
             <input type="button" id="label_lpt" value="Switch" style="display:none"/>
           </div>
             <hr>

             <div>
             <h3 class="detection-info">Task assignment</h3>
               <!-- <p id="current-drone">Current drone:</p> -->
             </div>
             <div>
               <label >Re-assign task:</label>
               <input type="button" class="yes-button" value="Yes" id="btneditcells" />
               <input type="button" class="no-button" value="No" id="btneditcells" />
             </div>
             <div>
               <label >Re-assign task to: </label>
               <select id="sel_lpm">
                 <option value="drone 1">Drone 1</option>
                 <option value="drone 2">Drone 2</option>
                 <option value="drone 3" selected>Drone 3</option>
                 <option value="drone 4" selected>Drone 4</option>

               </select>
               <input type="button" id="label_lpt" value="Switch" style="display:none"/>
             </div>

       <!-- change label class for each drone type -->
       <div id="droneRatings" class="droneRatings-container">
         <h2 class="list-heading">Drone competence and trust ratings</h2>
         <div>
         <hr>
         <label> Drone 1: </label>
         <div>
               <label for="competenceRange1">Competence(1-5): </label>
               <input type="range" min="1" max="5" value="3" class="slider" id="competenceRange1">
               <span id="competenceValue1">3</span>
             </div>
             <div>
               <label for="trustRange1">Trust(1-5): </label>
               <input type="range" min="1" max="5" value="3" class="slider" id="trustRange1">
               <span id="trustValue1">3</span>
             </div>
         </div>
         <hr>
         <div>
         <label> Drone 2: </label>
         <div>
               <label for="competenceRange2">Competence(1-5): </label>
               <input type="range" min="1" max="5" value="3" class="slider" id="competenceRange2">
               <span id="competenceValue2">3</span>
             </div>
             <div>
               <label for="trustRange2">Trust(1-5): </label>
               <input type="range" min="1" max="5" value="3" class="slider" id="trustRange2">
               <span id="trustValue2">3</span>
             </div>
         </div>
         <hr>
         <div>
         <label> Drone 3: </label>
         <div>
               <label for="competenceRange3">Competence(1-5): </label>
               <input type="range" min="1" max="5" value="3" class="slider" id="competenceRange3">
               <span id="competenceValue3">3</span>
             </div>
             <div>
               <label for="trustRange3">Trust(1-5): </label>
               <input type="range" min="1" max="5" value="3" class="slider" id="trustRange3">
               <span id="trustValue3">3</span>
             </div>
         </div>
         <hr>
         <div>
         <label> Drone 4: </label>
         <div>
               <label for="competenceRange4">Competence(1-5): </label>
               <input type="range" min="1" max="5" value="3" class="slider" id="competenceRange4">
               <span id="competenceValue4">3</span>
             </div>
             <div>
               <label for="trustRange4">Trust(1-5): </label>
               <input type="range" min="1" max="5" value="3" class="slider" id="trustRange4">
               <span id="trustValue4">3</span>
             </div>
         </div>
       </div>

</body>
</html>
